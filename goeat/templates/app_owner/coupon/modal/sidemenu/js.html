<script>
  var couponList = new Array;

  function arrAddCoupon() {
    if (inputCheck()) {
      couponList.push({
        'coupon_content': $('#side_menu').val(),
        'coupon_count': $('#stamp_count').val(),
        'coupon_start_dttm': $('#issue_date').val(),
      })
    }

    viewAddCoupon(couponList);
  }

  function viewAddCoupon(arr) {
    arr.forEach((item, idx, arr) => {
      $('.couponadd_list').append(`
        <li class="item" data-index="${idx}">
          <div class="order">
            <span class="order_number">
              ${idx}
            </span>
          </div>
          <div class="text_box">
            <p class="text">
              ${item.coupon_content}
            </p>
            <p class="text">
              ${item.coupon_count}
            </p>
            <p class="text">
              ${item.coupon_start_dttm}
            </p>
          </div>
          <div class="button_wrap">
            <button class="content_btn btn_fill" onclick="removeCoupon(${idx})">삭제</button>
          </div>
        </li>
    `);
    })
  }

  function removeCoupon(idx) {

  }

  function inputCheck() {
    if ($('#side_menu').val() == '') { alert('사이드메뉴를 입력해주세요.'); return false; }
    else if ($('#stamp_count').val() == '') { alert('스템프 갯수를 입력해주세요.'); return false; }
    else if ($('#issue_date').val() == '') { alert('발급일자를 입력해주세요.'); return false; }
    else { return true; }
  }


  ////////////////////////////////////////////////////////////


  var couponInputAll = document.querySelectorAll(".couponadd_input");
  var couponInput = document.querySelector(".couponadd_input");
  var couponAddNumberPad = document.querySelectorAll(".number_pad button");

  couponAddNumberPad.forEach(el => el.addEventListener('click', e => {
    if (!e.target.innerText) return onClickDelete();

    onClickNumber(e.target.innerText);
  }));

  couponInputAll.forEach(v => v.addEventListener('click', el => {
    couponInput = el.target;
  }));

  function onClickNumber(value) {

    if (couponInput.dataset.name === "스탬프갯수") {
      if (couponInput.value.length === 2) return;
    }

    if (couponInput.dataset.name === "발급일자") {
      if (couponInput.value.length === 8) return;
      couponInput.value = inputDateNumber(couponInput.value.concat(value));
      return;
    }

    couponInput.value = couponInput.value.concat(value);
  }

  function onClickDelete() {
    couponInput.value = couponInput.value.substr(0, couponInput.value.length - 1);
  }


</script>